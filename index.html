<!doctype html>

<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Your Music Vibes — Psikotes Lagu</title>
  <style>
    /* Calm / soothing visual style */
    :root{
      --bg1: #f5fbff; /* very light blue */
      --bg2: #eaf6f2; /* mint */
      --card: rgba(255, 255, 255, 0.8);
      --accent: #6aa6a1; /* soft teal */
      --muted: #5e6b6b;
      --glass: rgba(255, 255, 255, 0.6);
      font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    }
    html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--bg1),var(--bg2));color:#14353a}
    .wrap{max-width:980px;margin:32px auto;padding:28px}
    header{display:flex;align-items:center;gap:18px}
    .logo{width:68px;height:68px;border-radius:14px;background:linear-gradient(135deg,#cfeff1,#e8f8f5);display:flex;align-items:center;justify-content:center;box-shadow:0 6px 18px rgba(22,53,52,0.08)}
    .logo h1{font-size:20px;margin:0;color:var(--accent)}
    h2{margin:8px 0 18px;font-weight:600}.card{background:var(--card);backdrop-filter: blur(6px);border-radius:16px;padding:18px;margin-bottom:18px;box-shadow:0 8px 30px rgba(15,40,40,0.06)}
.controls{display:flex;gap:12px;flex-wrap:wrap}
button{background:var(--accent);color:rgb(0, 0, 0);border:0;padding:10px 14px;border-radius:10px;font-weight:600;cursor:pointer}
button.ghost{background:transparent;border:1px solid rgba(20,50,50,0.08);color:var(--muted)}

.question{margin:12px 0}
.options{display:flex;gap:10px;flex-wrap:wrap}
.opt{background:transparent;border:1px solid rgba(20,50,50,0.06);padding:8px 12px;border-radius:10px;cursor:pointer}
.opt.selected{background:linear-gradient(90deg,#dff3f0,#eaf9f8);border-color:var(--accent)}

.result-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px}
.song{padding:12px;border-radius:12px;background:linear-gradient(180deg,rgba(255,255,255,0.9),rgba(250,255,253,0.9));border:1px solid rgba(100,150,140,0.06)}
.song h4{margin:4px 0 6px}
.song p{margin:0;font-size:13px;color:var(--muted)}

footer{margin-top:10px;color:var(--muted);font-size:13px;text-align:center}

/* modal */
.modal-backdrop{position:fixed;inset:0;background:rgba(10,20,20,0.35);display:none;align-items:center;justify-content:center;padding:20px}
.modal{background:var(--card);padding:18px;border-radius:14px;max-width:720px;width:100%;box-shadow:0 12px 40px rgba(8,30,30,0.2)}
.close{float:right;border:0;background:transparent;font-weight:700;font-size:18px;cursor:pointer}

@media (max-width:520px){.wrap{padding:14px}.logo{width:54px;height:54px}}

  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo"><h1>YMV</h1></div>
      <div>
        <h2>Your Music Vibes</h2>
        <div style="color:var(--muted)">Tes psikotes sederhana untuk menemukan tipe lagu yang cocok untuk suasana hatimu.</div>
      </div>
    </header><section class="card" id="home">
  <h3>Mulai</h3>
  <p style="color:var(--muted)">Tekan <strong>Mulai Tes</strong> untuk menjawab beberapa pertanyaan singkat. Di akhir akan muncul tipe musik dan 4 rekomendasi lagu lengkap dengan preview lirik.</p>
  <div class="controls" style="margin-top:14px">
    <button id="startBtn">Mulai Tes</button>
    <button class="ghost" id="viewTypesBtn">Lihat Arti Tipe Musik</button>
    <button class="ghost" id="exitBtn">Keluar</button>
  </div>
</section>

<section class="card" id="quiz" style="display:none">
  <h3>Psikotes — Pertanyaan</h3>
  <div id="questionsHolder"></div>
  <div style="margin-top:12px;display:flex;gap:8px;justify-content:flex-end">
    <button id="prevBtn" class="ghost">Sebelumnya</button>
    <button id="nextBtn">Berikutnya</button>
    <button id="finishBtn" style="display:none">Selesai</button>
  </div>
</section>

<section class="card" id="result" style="display:none">
  <h3>Hasil Tipe Musikmu</h3>
  <div id="resultSummary" style="margin-bottom:12px"></div>
  <div class="result-grid" id="recommendations"></div>
  <div style="margin-top:12px;display:flex;gap:8px;justify-content:flex-end">
    <button id="retakeBtn" class="ghost">Ulang Tes</button>
    <button id="homeBtn">Beranda</button>
  </div>
</section>

<section class="card" id="typesCard" style="display:none">
  <h3>Arti Tipe Musik</h3>
  <ul>
    <li><strong>Chill</strong> — Musik santai untuk relaksasi dan fokus.</li>
    <li><strong>Energetic</strong> — Musik penuh tenaga, cocok untuk olahraga atau semangat.</li>
    <li><strong>Melancholic</strong> — Musik melankolis, cocok untuk merenung atau suasana sendu.</li>
    <li><strong>Happy</strong> — Musik ceria untuk perayaan atau mood booster.</li>
  </ul>
  <div style="text-align:right;margin-top:10px"><button id="closeTypes">Tutup</button></div>
</section>


  </div>  <!-- modal untuk lirik -->  <div class="modal-backdrop" id="modal">
    <div class="modal" role="dialog" aria-modal="true">
      <button class="close" id="closeModal">×</button>
      <div id="modalContent"></div>
    </div>
  </div>  <script>
    // Data tes singkat (bisa dikembangkan)
    const questions = [
      {q: 'Kapan kamu paling suka mendengarkan musik?', a:['Pagi — menyegarkan','Saat kerja/studi — fokus','Malem santai — rileks','Saat olahraga — semangat']},
      {q: 'Apa instrumen yang kamu sukai?', a:['Gitar akustik','Synth / EDM','Piano','Drum cepat & bass kuat']},
      {q: 'Pilih suasana yang kamu cari sekarang', a:['Tenang & adem','Bersemangat','Sedih & mellow','Riang & optimis']},
      {q: 'Jenis tempo yang kamu suka?', a:['Lambat','Sedang','Lambat-medium','Cepat']},
      {q: 'Lirik yang kamu suka biasanya?', a:['Sederhana & puitis','Energi & repetitif','Dalam & emosional','Ringan & ceria']}
    ];

    // Database lagu rekomendasi: hanya menampilkan preview lirik pendek (<=10 kata)
    const songs = {
      chill: [
        {artist:'Aria Sora', title:'Morning Dew', preview:'sunlight through the window'},
        {artist:'Luna Vale', title:'Sea Whisper', preview:'quiet waves breathing softly'},
        {artist:'Noah & The Pines', title:'Late Afternoon', preview:'coffee steam slow and warm'},
        {artist:'Kamilah', title:'Soft Roads', preview:'walking slow under the sky'}
      ],
      energetic: [
        {artist:'PulseDrive', title:'Run It Up', preview:'feet hit the pavement now'},
        {artist:'Neon Flux', title:'Get Loud', preview:'hands up, feel the beat'},
        {artist:'Beatforge', title:'Velocity', preview:'adrenaline rush, push harder'},
        {artist:'Raya Riot', title:'Breakout', preview:'lights flash, heart races'}
      ],
      melancholic: [
        {artist:'Hadi Pramana', title:'Fading Letters', preview:'raindrops on my windowpane'},
        {artist:'Seren', title:'Echoes', preview:'empty rooms remember your name'},
        {artist:'Maya L.', title:'Late Train', preview:'walking slow with old songs'},
        {artist:'Damar', title:'Grey Sky', preview:'holding on to distant lights'}
      ],
      happy: [
        {artist:'Sunny Crew', title:'Daylight Smile', preview:'sun on faces, laughter loud'},
        {artist:'Poply', title:'Bubble Up', preview:'sparkle in the little things'},
        {artist:'Mika Joy', title:'Cup of Joy', preview:'sing along, feel the bright'},
        {artist:'The Green Streets', title:'Weekend Parade', preview:'dancing through the neighborhood'}
      ]
    };

    // Render questions
    const questionsHolder = document.getElementById('questionsHolder');
    questions.forEach((q,i)=>{
      const div = document.createElement('div'); div.className='question';
      div.innerHTML = `<strong>Q${i+1}.</strong> <span>${q.q}</span><div class="options" data-q="${i}"></div>`;
      questionsHolder.appendChild(div);
      const opts = div.querySelector('.options');
      q.a.forEach((opt,j)=>{
        const b = document.createElement('button'); b.type='button'; b.className='opt'; b.textContent = opt; b.dataset.index = j;
        b.onclick = ()=>{ selectOption(i,j,b); }
        opts.appendChild(b);
      })
    });

    const state = {answers: Array(questions.length).fill(null), pos:0};
    function selectOption(qIdx,optIdx,btn){
      state.answers[qIdx]=optIdx;
      // mark selected
      const opts = document.querySelectorAll(`.options[data-q='${qIdx}'] .opt`);
      opts.forEach(o=>o.classList.remove('selected'));
      btn.classList.add('selected');
    }

    // Navigation
    const startBtn = document.getElementById('startBtn');
    const quiz = document.getElementById('quiz');
    const home = document.getElementById('home');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const finishBtn = document.getElementById('finishBtn');
    const result = document.getElementById('result');

    startBtn.onclick = ()=>{ home.style.display='none'; quiz.style.display='block'; showQuestion(0); }
    document.getElementById('viewTypesBtn').onclick = ()=>{ document.getElementById('typesCard').style.display='block'; }
    document.getElementById('closeTypes').onclick = ()=>{ document.getElementById('typesCard').style.display='none'; }
    document.getElementById('exitBtn').onclick = ()=>{ window.close?.(); alert('Terima kasih!'); }

    function showQuestion(idx){
      state.pos = idx;
      const qBlocks = document.querySelectorAll('.question');
      qBlocks.forEach((el,i)=>el.style.display = (i===idx)?'block':'none');
      prevBtn.style.display = idx===0? 'none':'inline-block';
      nextBtn.style.display = idx===questions.length-1? 'none':'inline-block';
      finishBtn.style.display = idx===questions.length-1? 'inline-block':'none';
    }

    prevBtn.onclick = ()=> showQuestion(Math.max(0,state.pos-1));
    nextBtn.onclick = ()=> showQuestion(Math.min(questions.length-1,state.pos+1));

    finishBtn.onclick = ()=>{
      // basic scoring: map answers to types
      // we assign each option index a type weight
      const tally = {chill:0, energetic:0, melancholic:0, happy:0};
      state.answers.forEach((ans,i)=>{
        // default mapping heuristic
        if(ans===null) return;
        if(i===0){ // waktu
          if(ans===0) tally.chill++;
          if(ans===1) tally.happy++;
          if(ans===2) tally.melancholic++;
          if(ans===3) tally.energetic++;
        }
        if(i===1){ // instrumen
          if(ans===0) tally.chill++;
          if(ans===1) tally.energetic++;
          if(ans===2) tally.melancholic++;
          if(ans===3) tally.energetic++;
        }
        if(i===2){ // suasana
          if(ans===0) tally.chill++;
          if(ans===1) tally.energetic++;
          if(ans===2) tally.melancholic++;
          if(ans===3) tally.happy++;
        }
        if(i===3){ // tempo
          if(ans===0) tally.chill++;
          if(ans===1) tally.chill++;
          if(ans===2) tally.melancholic++;
          if(ans===3) tally.energetic++;
        }
        if(i===4){ // lirik
          if(ans===0) tally.melancholic++;
          if(ans===1) tally.energetic++;
          if(ans===2) tally.melancholic++;
          if(ans===3) tally.happy++;
        }
      });

      // choose highest
      let topType = 'chill'; let topScore = -1;
      Object.keys(tally).forEach(k=>{ if(tally[k]>topScore){ topScore=tally[k]; topType=k; } });
      showResult(topType, tally);
    }

    function showResult(type, tally){
      quiz.style.display='none'; result.style.display='block';
      const summary = document.getElementById('resultSummary');
      const descMap = {
        chill: 'Kamu cocok dengan musik <strong>Chill</strong> — santai, adem, dan menenangkan.',
        energetic: 'Kamu cocok dengan musik <strong>Energetic</strong> — berenergi dan memacu semangat.',
        melancholic: 'Kamu cocok dengan musik <strong>Melancholic</strong> — mendalam dan emosional.',
        happy: 'Kamu cocok dengan musik <strong>Happy</strong> — ceria dan penuh keceriaan.'
      };
      summary.innerHTML = `<div style="font-size:18px;font-weight:700">Tipe: ${type.toUpperCase()}</div><div style="color:var(--muted);margin-top:6px">${descMap[type]}</div>`;

      const recHolder = document.getElementById('recommendations'); recHolder.innerHTML='';
      songs[type].forEach(s=>{
        const el = document.createElement('div'); el.className='song';
        el.innerHTML = `<h4>${s.title}</h4><div style="font-weight:600;font-size:13px">${s.artist}</div><p>Preview lirik: "${s.preview}"</p><div style="margin-top:10px;text-align:right"><button class="ghost" data-artist="${encodeURIComponent(s.artist)}" data-title="${encodeURIComponent(s.title)}">Lihat Lirik</button></div>`;
        el.querySelector('button').onclick = (e)=>{ openLyrics(s); };
        recHolder.appendChild(el);
      });
    }

    function openLyrics(song){
      const modal = document.getElementById('modal');
      const c = document.getElementById('modalContent');
      c.innerHTML = `<h3>${song.title} — ${song.artist}</h3><p style=\"color:var(--muted)\">Preview lirik (potongan pendek):</p><blockquote style=\"font-size:16px;margin:10px 0;padding:10px;border-left:3px solid var(--accent)\">${song.preview}</blockquote><p style=\"color:var(--muted)\">Catatan: Untuk melindungi hak cipta, file ini hanya menampilkan potongan lirik pendek. Untuk lirik lengkap, salin judul & artis di bawah lalu cari di layanan lirik/website musik.</p><div style=\"margin-top:10px;text-align:right\"><button id=\"copyBtn\" class=\"ghost\">Salin Judul & Artis</button> <button id=\"searchBtn\">Cari Lirik</button></div>`;
      modal.style.display='flex';
      document.getElementById('copyBtn').onclick = ()=>{
        navigator.clipboard?.writeText(`${song.title} ${song.artist}`).then(()=>{ alert('Judul & artis disalin ke clipboard.'); }).catch(()=>{ alert('Tidak dapat mengakses clipboard. Silakan salin manual.'); });
      };
      document.getElementById('searchBtn').onclick = ()=>{
        // open search in new tab using query (user's browser will perform the search)
        const q = encodeURIComponent(song.title + ' ' + song.artist + ' lirik');
        window.open('https://www.google.com/search?q='+q,'_blank');
      };
    }

    document.getElementById('closeModal').onclick = ()=>{ document.getElementById('modal').style.display='none'; }
    // also close modal on backdrop click
    document.getElementById('modal').onclick = (e)=>{ if(e.target.id==='modal') document.getElementById('modal').style.display='none'; }

    document.getElementById('retakeBtn').onclick = ()=>{ location.reload(); }
    document.getElementById('homeBtn').onclick = ()=>{ result.style.display='none'; home.style.display='block'; }

    // initial: hide all question blocks
    document.querySelectorAll('.question').forEach(el=>el.style.display='none');

  </script></body>
</html>